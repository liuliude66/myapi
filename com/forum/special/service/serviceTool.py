#! /usr/bin/python# -*- coding:utf-8 -*-import requests, json, urllib.requestfrom com.forum.lottery.config.GlobalParams import GlobalConfigfrom com.forum.lottery.common.Singleton import Singleton# 请求头headers = dict()headers['User-Agent'] = 'SSCBeta'headers['client-version'] = GlobalConfig['Client_version']headers['x-requested-with'] = 'x-requested-with'headers['Content-Type'] = 'application/json'headers["Accept-Language"] = "zh-CN,zh;q=0.8"headers['sessionid'] = ''RequestUrl = 'url'RequestParams = 'params'RequestTime = 'requestTime'BaseUrl = GlobalConfig['DOMAIN']# requests封装class Request(object):    @classmethod    def get(cls, url, params):        headers['sessionid'] = Singleton().getSessionId()        try:            global r            r = requests.get(BaseUrl + url, params = params, headers = headers)            r.encoding = 'UTF-8'            json_response = json.loads(r.text)            json_response[RequestTime] = r.elapsed.microseconds / 1000            json_response[RequestUrl] = url            json_response[RequestParams] = params            return 0, json_response        except Exception as e:            return 1, {'code':urllib.request.urlopen(GlobalConfig['DOMAIN'] + url).getcode(), 'msg': 'get请求出错，出错原因:%s' % e, RequestTime: r.elapsed.microseconds / 1000, RequestUrl: url}    @classmethod    def post(cls, url, params):        headers['sessionid'] = Singleton().getSessionId()        try:            if params is None:                data = None            elif isinstance(params, dict):                data = json.dumps(params)            else:                data = eval(params)            global r            r = requests.post(BaseUrl + url, data, headers = headers, verify=False)            json_response = json.loads(r.text)            json_response[RequestTime] = r.elapsed.microseconds / 1000            json_response[RequestUrl] = url            json_response[RequestParams] = data            return 0, json_response        except Exception as e:            return 1, {'code': urllib.request.urlopen(GlobalConfig['DOMAIN'] + url).getcode(), 'msg': 'post请求出错，出错原因:%s' %e, RequestTime: r.elapsed.microseconds / 1000, RequestUrl: url}    def postJson(cls, url, jsonStr):        headers['sessionid'] = Singleton().getSessionId()        try:            global r            r = requests.post(BaseUrl + url, json = jsonStr, headers = headers)            json_response = json.loads(r.text)            json_response[RequestTime] = r.elapsed.microseconds / 1000            json_response[RequestUrl] = url            json_response[RequestParams] = jsonStr            return 0, json_response        except Exception as e:            return 1, {'code': urllib.request.urlopen(BaseUrl + url).getcode(), 'msg': 'post请求出错，出错原因:%s' %e, RequestTime: r.elapsed.microseconds / 1000, RequestUrl: url}